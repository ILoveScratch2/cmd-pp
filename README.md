## 🎯 项目整体目标
一个 **运行在 Windows Console 的 C++ 代码编辑器**，它具备：
- **代码编辑功能**（行编辑、插入、删除、光标移动）。
- **语法高亮**（关键字、函数名、数字、注释、字符串有不同的颜色）。
- **文件操作**（加载、保存源代码文件）。
- **查找/替换**。
- **代码工具集成功能**：比如代码混淆（obfuscate）和代码格式化（style）。
- **中文输入法支持**（拼音输入候选，候选分页）。
- **剪贴板交互**（可将代码复制到系统剪贴板，支持 ANSI/UTF-8/UTF-16 格式）。
- **一些 IDE 辅助功能**（跳到指定行、运行外部编译工具、阻止右键菜单防止误触...）。
- **小型菜单系统**（按 `Esc` 打开功能菜单）。

---

## 🧩 主要结构
把所有核心逻辑塞进 `_ed_code` 命名空间：
1. **全局状态变量**
   - 控制台尺寸 (`_ed_width`, `_ed_height`)
   - 光标位置 (`zz_x`, `zz_y`)
   - 视口范围 (`_ed_top`, `_ed_line`)
   - 编辑缓冲区（`vector<string> v`）

2. **语法高亮相关**
   - `unordered_map` 存储 C++ 基本类型/关键字/符号。
   - `_ed_outcol()`：逐字符渲染，切换颜色输出，实现伪“语法高亮”。

3. **编辑器功能**
   - `_edf_up/_down/_left/_right`：光标移动。
   - `_edf_enter/_edf_addch/_edf_back`：换行、插入字符/退格（包含中文双字节兼容）。
   - `_edf_home/_edf_end/_edf_pgup/_edf_pgdn`：行首末、翻页。

4. **文件操作**
   - `_edf_save_file()` 保存到文件。
   - `_edf_load_file()` 加载外部文件。
   - `readFileToVector()` 按行载入文本。

5. **扩展功能**
   - **查找/替换**：`_edf_find()`, `_edf_find_next()`, `_edf_replace()`
   - **中文拼音输入法**：`_edf_zhcn()`（带候选列表、数字选词分页）
   - **复制到剪贴板**：`_edf_jqb()`
   - **调用外部工具**：代码混淆 `_edf_obfus()` / 代码整理 `_edf_cstyle()`
   - **转到光标行** `_edf_curto()`
   - **“关于”菜单** `_edf_about()`（署名：by HeTianYu313 😎）

6. **菜单系统**
   - `_edf_escape()`：当用户按下 `Esc` 时弹出菜单（0-9,a-f 多种功能选项）。
   - `_ed_run()`：循环监听键盘，分派调用相应操作。

7. **初始化 & 主循环**
   - `main()`：初始化各个模块（`_ed_code`, `_ed_cpp`, `cwh`, `eview`, `srf`），设置控制台标题为 **Console C++ IDE**，然后不断循环 `_ed_code::_ed_run()`，持续提供编辑器体验。

---

## 🔥 特点
- **把 Windows Console 打造成文本编辑器**：方向键、翻页键、F1-F3 等键绑定了不同功能。
- **彩色语法高亮**：虽说硬编码略复杂，但在终端里看起来很“IDE 风”。
- **中文拼音输入支持**：支持候选分页（“搜狗输入法”）。
- **代码混淆 + 代码整理工具调用**：用外部可执行文件接力完成。
- **细节**：
  - 光标越界修正。
  - Backspace 兼容中文双字节。
  - 禁用了 Windows Console 的“右键粘贴”防止乱输入。

---

## 🏆 总结一句话
**Windows 控制台环境下的迷你 IDE**：  
它结合了**文本编辑、语法高亮、中文输入法、文件管理、查找替换、剪贴板交互以及代码工具调用**，虽然用的是普通控制台窗口，但功能丰富得像是“小型开发环境”。  

从效果上看，把 **Vim + Notepad++ + 输入法**压缩到你的命令行窗口里。  
